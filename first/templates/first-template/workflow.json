{
  // Version of the document schema
  "apiVersion": "1.0.0",
  
  // Template inputs, which can be passed by an API call or a webhook
  "inputs": {
    "alias": {
      "type": "string",
      "displayName": "User Alias",
      "description": "A unique user alias or user principal name.",
      "required": true
    },
    "emailDomain": {
      "type": "string",
      "displayName": "Email Domain",
      "description": "Additional details about this input.",
      "required": true
    },
    "notify": {
      "type": "boolean",
      "displayName": "Notify via email",
      "description": "...",
      "required": false
    },
    "props": {
      "type": "object",
      "displayName": "User Properties",
      "description": "Optional input with flexible schema, represented by JSON object.",
      "required": false
    }
  },

  // Q: Is there a concept of template outputs?

  // Body contains top-level activity of the workflow (often, sequence activity)
  "body": {
    "id": "root",
    "description": "Top-level sequence of steps",
    "type": "sequence",
    "items": [
      // Workflow activity with id 'step1'
      // Output values generated by this step can be referenced as '$step1.{output-name}'
      {
        // Uniquely identifies the activity within the workflow
        "id": "step1",
        // Readable, short name of the activity that can be displayed in logs, UI
        "displayName": "Create User",
        // Task defined in a package
        "type": "packageTask",
        // Full package name and version, which includes package vendor (publisher), package name, and package version specification.
        "package": "vendor/package-name@^1.0.0",
        // Task name within above package
        "task": "CreateUser",
        // Input bindings
        "inputs": {
          "username": {
            // Reference to a specific workflow instance input
            "type": "eval:string",
            "value": "workflow.inputs.alias",
          },
          "email": {
            // Using string template to evaluate text 'expression'
            "type": "format",
            "value": "{{workflow.inputs.alias}}@{{workflow.inputs.emailDomain}}"
          },
          "fullname": {
            "type": "format",
            "value": "{{workflow.inputs.props.firstName}} {{workflow.inputs.props.lastName}}"
          }
        }
      },
      // Workflow activity with id 'step2'
      {
        "id": "step2",
        "displayName": "Check condition",
        "type": "switch",
        "value": {
          "type": "eval:string",
          "value": "workflow.inputs.notify"
        },
        "cases": [
          {
            "option": {
              "type": "literal:bool",
              "value": "true"
            },
            "body": {
              "id": "step3",
              "type": "sequence",
              "items": [
                {
                  "id": "step4",
                  "displayName": "Send Email",
                  "type": "packageTask",
                  "package": "some-vendor/some-package@1.2.3",
                  "task": "send-email",
                  "inputs": {
                    "to": {
                      "type": "eval:string",
                      "value": "step1.email"
                    },
                    "subject": {
                      "type": "format",
                      "value": "Notification: user {{step1.userName}} has been created."
                    },
                    "message": {
                      "type": "format",
                      "value": "Hello {{workflow.inputs.props.firstName}},\nThis is email message body."
                    }
                  }
                }
              ]
            }
          }
        ]
      }
    ]
  }
}
